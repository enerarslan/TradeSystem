# =============================================================================
# XGBOOST HYPERPARAMETERS - INSTITUTIONAL DEFAULTS
# =============================================================================
#
# This configuration file contains institutional-grade hyperparameter settings
# for XGBoost models in the AlphaTrade backtesting system.
#
# Reference:
#   - "Advances in Financial Machine Learning" by Lopez de Prado (2018)
#   - XGBoost Documentation
# =============================================================================

version: "1.0"
model_type: "xgboost"
last_updated: "2024-01-01"

# =============================================================================
# PRODUCTION DEFAULTS (Conservative)
# =============================================================================

production:
  # Core parameters
  n_estimators: 100
  max_depth: 5
  learning_rate: 0.05

  # Regularization (CRITICAL)
  min_child_weight: 50        # Equivalent to min_child_samples
  reg_alpha: 0.1              # L1 regularization
  reg_lambda: 1.0             # L2 regularization
  gamma: 0.1                  # Min loss reduction for split

  # Sampling
  subsample: 0.8
  colsample_bytree: 0.8
  colsample_bylevel: 0.8
  colsample_bynode: 0.8

  # Early stopping
  early_stopping_rounds: 50

  # Other
  n_jobs: -1
  random_state: 42
  verbosity: 0

  # XGBoost specific
  booster: "gbtree"
  objective: "binary:logistic"
  eval_metric: "auc"
  tree_method: "hist"         # Fast histogram-based algorithm

# =============================================================================
# RESEARCH DEFAULTS (Balanced)
# =============================================================================

research:
  n_estimators: 200
  max_depth: 7
  learning_rate: 0.05

  min_child_weight: 30
  reg_alpha: 0.05
  reg_lambda: 0.5
  gamma: 0.05

  subsample: 0.85
  colsample_bytree: 0.85
  colsample_bylevel: 0.85
  colsample_bynode: 0.85

  early_stopping_rounds: 30

  n_jobs: -1
  random_state: 42
  verbosity: 0
  booster: "gbtree"
  objective: "binary:logistic"
  eval_metric: "auc"
  tree_method: "hist"

# =============================================================================
# HYPERPARAMETER SEARCH SPACE
# =============================================================================

search_space:
  n_estimators:
    type: "int"
    low: 50
    high: 500
    step: 50

  max_depth:
    type: "int"
    low: 3
    high: 10

  learning_rate:
    type: "loguniform"
    low: 0.01
    high: 0.2

  min_child_weight:
    type: "int"
    low: 10
    high: 100
    step: 10

  reg_alpha:
    type: "loguniform"
    low: 0.001
    high: 10.0

  reg_lambda:
    type: "loguniform"
    low: 0.001
    high: 10.0

  gamma:
    type: "loguniform"
    low: 0.001
    high: 1.0

  subsample:
    type: "float"
    low: 0.6
    high: 1.0

  colsample_bytree:
    type: "float"
    low: 0.6
    high: 1.0

# =============================================================================
# REGIME-SPECIFIC PARAMETERS
# =============================================================================

regimes:
  low_volatility:
    n_estimators: 150
    max_depth: 6
    learning_rate: 0.03
    min_child_weight: 40

  high_volatility:
    n_estimators: 75
    max_depth: 4
    learning_rate: 0.08
    min_child_weight: 60

  trending:
    n_estimators: 100
    max_depth: 5
    learning_rate: 0.05
    min_child_weight: 50

  mean_reverting:
    n_estimators: 100
    max_depth: 5
    learning_rate: 0.05
    min_child_weight: 50

# =============================================================================
# CONSTRAINTS
# =============================================================================

constraints:
  min_samples_warning: 1000
  min_samples_error: 500
  max_depth_warning: 7
  min_regularization_warning: 0.01

# =============================================================================
# VALIDATION REQUIREMENTS
# =============================================================================

validation:
  cv_method: "combinatorial_purged"
  n_splits: 6
  n_test_splits: 2
  purge_gap: "auto"
  embargo_pct: 0.02
  min_cv_auc: 0.52
  max_cv_std: 0.05
  min_cv_sharpe: 0.0

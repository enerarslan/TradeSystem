# =============================================================================
# ALPHATRADE PLATFORM - ENVIRONMENT CONFIGURATION
# =============================================================================
# JPMorgan-Level Trading System
# Version: 3.0.0
#
# INSTRUCTIONS:
# 1. Copy this file to .env: cp .env.example .env
# 2. Fill in your actual values
# 3. NEVER commit .env to git (it's in .gitignore)
# =============================================================================

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================
# Environment: development, staging, production
APP_ENV=development

# Debug mode (set to false in production!)
DEBUG=true

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Timezone for trading operations
TIMEZONE=America/New_York

# Application version
APP_VERSION=3.0.0

# =============================================================================
# TRADING MODE
# =============================================================================
# Options: backtest, paper, live
# WARNING: "live" mode uses real money!
TRADING_MODE=paper

# Enable/disable trading (master kill switch)
TRADING_ENABLED=true

# =============================================================================
# ALPACA BROKER API (Required for paper/live trading)
# =============================================================================
# Get your keys at: https://app.alpaca.markets/
# Paper trading: https://paper-api.alpaca.markets
# Live trading: https://api.alpaca.markets

ALPACA_API_KEY=your_alpaca_api_key_here
ALPACA_SECRET_KEY=your_alpaca_secret_key_here

# Paper trading (default)
ALPACA_BASE_URL=https://paper-api.alpaca.markets
ALPACA_DATA_URL=https://data.alpaca.markets

# For live trading, uncomment below:
# ALPACA_BASE_URL=https://api.alpaca.markets

# Enable paper trading mode
ALPACA_PAPER_TRADING=true

# =============================================================================
# REDIS CONFIGURATION (Message Bus & State Store)
# =============================================================================
# Local development
REDIS_URL=redis://localhost:6379

# With password (production)
# REDIS_URL=redis://:your_password@localhost:6379/0

# Redis Cloud or AWS ElastiCache
# REDIS_URL=redis://:password@your-redis-host.cloud.redislabs.com:16379

# Redis settings
REDIS_MAX_CONNECTIONS=20
REDIS_SOCKET_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true

# =============================================================================
# TIMESCALEDB / POSTGRESQL (Market Data Storage)
# =============================================================================
# Local development
DATABASE_URL=postgresql://alphatrade:alphatrade@localhost:5432/market_data

# Production format
# DATABASE_URL=postgresql://user:password@host:5432/database?sslmode=require

# Individual connection parameters (alternative to DATABASE_URL)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=market_data
DB_USER=alphatrade
DB_PASSWORD=alphatrade

# Connection pool settings
DB_POOL_MIN_SIZE=5
DB_POOL_MAX_SIZE=20

# =============================================================================
# MLFLOW (Model Registry & Experiment Tracking)
# =============================================================================
# Local MLflow server
MLFLOW_TRACKING_URI=http://localhost:5001

# MLflow with authentication
# MLFLOW_TRACKING_URI=https://mlflow.your-domain.com
# MLFLOW_TRACKING_USERNAME=your_username
# MLFLOW_TRACKING_PASSWORD=your_password

# S3 for artifact storage (production)
# MLFLOW_S3_ENDPOINT_URL=https://s3.amazonaws.com
# AWS_ACCESS_KEY_ID=your_aws_key
# AWS_SECRET_ACCESS_KEY=your_aws_secret

# Default experiment name
MLFLOW_EXPERIMENT_NAME=alphatrade_models

# =============================================================================
# RISK MANAGEMENT (CRITICAL SETTINGS!)
# =============================================================================
# Maximum position size per symbol (as % of portfolio)
MAX_POSITION_SIZE_PCT=0.10

# Maximum total exposure (as % of portfolio)
MAX_TOTAL_EXPOSURE_PCT=0.80

# Maximum daily loss before kill switch triggers (as % of portfolio)
MAX_DAILY_LOSS_PCT=0.02

# Maximum drawdown before kill switch triggers
MAX_DRAWDOWN_PCT=0.05

# Minimum cash reserve (as % of portfolio)
MIN_CASH_RESERVE_PCT=0.10

# Maximum number of open positions
MAX_OPEN_POSITIONS=20

# Maximum orders per minute (rate limiting)
MAX_ORDERS_PER_MINUTE=10

# =============================================================================
# BACKTESTING CONFIGURATION
# =============================================================================
# Initial capital for backtests
BACKTEST_INITIAL_CAPITAL=100000

# Commission per trade (as decimal, 0.001 = 0.1%)
BACKTEST_COMMISSION_PCT=0.001

# Slippage per trade (as decimal, 0.0005 = 0.05%)
BACKTEST_SLIPPAGE_PCT=0.0005

# Default date range (if not specified)
BACKTEST_DEFAULT_START_DATE=2020-01-01
BACKTEST_DEFAULT_END_DATE=2024-01-01

# =============================================================================
# DATA CONFIGURATION
# =============================================================================
# Local data storage path
DATA_STORAGE_PATH=./data/storage
DATA_PROCESSED_PATH=./data/processed
DATA_CACHE_PATH=./data/cache

# Data provider: alpaca, polygon, yahoo
DATA_PROVIDER=alpaca

# Default timeframe for data
DEFAULT_TIMEFRAME=15Min

# Cache TTL in seconds
CACHE_TTL=3600

# =============================================================================
# FEATURE STORE
# =============================================================================
# Feature computation mode: realtime, batch
FEATURE_MODE=realtime

# Feature cache TTL (seconds)
FEATURE_CACHE_TTL=300

# Enable feature validation
FEATURE_VALIDATION_ENABLED=true

# =============================================================================
# EXECUTION ALGORITHMS
# =============================================================================
# Default algorithm: market, twap, vwap, iceberg, pegged
DEFAULT_EXECUTION_ALGO=market

# TWAP settings
TWAP_DEFAULT_DURATION_MINUTES=30
TWAP_DEFAULT_SLICES=10

# Iceberg settings
ICEBERG_VISIBLE_PCT=0.20
ICEBERG_RANDOMIZE=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
# Prometheus metrics port
METRICS_PORT=9090

# Enable structured logging
STRUCTURED_LOGGING=true

# Log format: json, text
LOG_FORMAT=json

# Healthcheck interval (seconds)
HEALTHCHECK_INTERVAL=30

# =============================================================================
# NOTIFICATIONS (Optional)
# =============================================================================
# Email notifications
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# NOTIFICATION_EMAIL=alerts@your-domain.com

# Slack notifications
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/xxx/xxx/xxx
# SLACK_CHANNEL=#trading-alerts

# Telegram notifications
# TELEGRAM_BOT_TOKEN=your_bot_token
# TELEGRAM_CHAT_ID=your_chat_id

# =============================================================================
# API SERVER
# =============================================================================
# API host and port
API_HOST=0.0.0.0
API_PORT=8000

# Workers (for production)
API_WORKERS=4

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8080

# API rate limiting
API_RATE_LIMIT=100
API_RATE_LIMIT_PERIOD=60

# JWT secret for API authentication
# JWT_SECRET_KEY=your-super-secret-key-change-in-production
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION_HOURS=24

# =============================================================================
# DOCKER CONFIGURATION
# =============================================================================
# Docker compose project name
COMPOSE_PROJECT_NAME=alphatrade

# Docker network
DOCKER_NETWORK=alphatrade-network

# =============================================================================
# ADVANCED SETTINGS
# =============================================================================
# Connection pool settings
POOL_MIN_SIZE=5
POOL_MAX_SIZE=20
POOL_ACQUIRE_TIMEOUT=5

# Circuit breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_RECOVERY_TIME=30

# Service discovery
SERVICE_HEARTBEAT_INTERVAL=10
SERVICE_TIMEOUT_SECONDS=30

# =============================================================================
# DEVELOPMENT ONLY
# =============================================================================
# Enable hot reload
HOT_RELOAD=true

# Mock data for testing
USE_MOCK_DATA=false

# Verbose SQL logging
SQL_ECHO=false

# Profile mode
PROFILING_ENABLED=false
